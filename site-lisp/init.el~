;; --------------------------------------------------
;; 基本設定

;; common lisp
(require 'cl)

;; 文字コード
;; note: win と mac で環境を分けている
(set-language-environment "Japanese")
(let ((ws window-system))
  (cond ((eq ws 'w64)
         (prefer-coding-system 'utf-8-unix)
         (set-default-coding-systems 'utf-8-unix)
         (setq file-name-coding-system 'sjis)
         (setq locale-coding-system 'utf-8))
        ((eq ws 'ns)
         (require 'ucs-normalize)
         (prefer-coding-system 'utf-8-hfs)
         (setq file-name-coding-system 'utf-8-hfs)
         (setq locale-coding-system 'utf-8-hfs))))

;; フォント設定
;; Win: Meiryo
;; Mac: Ricty
(let ((ws window-system))
  (cond ((eq ws 'w64)
         (set-face-attribute 'default nil
                             :family "Modern"  ;; 英数
                             :height 100)
         (set-fontset-font nil 'japanese-jisx0208 (font-spec :family "Meiryo")))  ;; 日本語
        ((eq ws 'ns)
         (set-face-attribute 'default nil
                             :family "Ricty"  ;; 英数
                             :height 140)
         (set-fontset-font nil 'japanese-jisx0208 (font-spec :family "Ricty")))))  ;; 日本語


;; スタートアップの非表示
(setq inhibit-startup-screen t)

;; メニューバーの非表示
(menu-bar-mode -1)

;; scratchの初期メッセージの消去
(setq initial-scratch-message "")

;; ツールバーの非表示
(tool-bar-mode -1)

;; タブをスペースに変換
(setq-default indent-tabs-mode nil)

;; タブ幅の指定
(custom-set-variables '(tab-width 4))

;; --------------------------------------------------
;; キーバインド

;; C-h: backspace
(global-set-key "\C-h" 'delete-backward-char)

;; --------------------------------------------------
;; グラフィック設定

;; 対応カッコをハイライト表示
(show-paren-mode t)
(setq show-paren-style 'expression)
(setq show-paren-delay 0)
(set-face-background 'show-paren-match-face "plum2")
(set-face-foreground 'show-paren-match-face "Blue")

;; 日本語入力のON/OFFでカーソルの色を変える
(add-hook 'mw32-ime-on-hook
	  (function(lambda() (set-cursor-color "Pink"))))
(add-hook 'wm32-ime-off-hook
	  (function(lambda() (set-cursor-color "Green"))))

;; タイトルバーにファイルのフルパスを表示
(setq frame-title-format
      (format "%%f - Emacs@%s" (system-name)))

;; 行番号の表示
(global-linum-mode t)
(set-face-attribute 'linum nil
		    :foreground "Green"
		    :background "Black"
		    :height 0.9)

;; --------------------------------------------------
;; verilog-mode 
;; VerilogHDL(.vファイル)

;; Load verilog-mode only when needed
(autoload 'verilog-mode "verilog-mode" "verilog mode" t)

;; Any files that end in .v should be in velilog mode
(setq auto-mode-alist (cons '("\\.v\\'" . verilog-mode) auto-mode-alist))

;; Any files in verilog mode should have their keywords colorized
(add-hook 'verilog-mode-hook '(lambda () (font-look-mode 1)))

(add-hook 'verilog-mode-hook '(lambda ()
         (add-hook 'local-write-file-hooks
	 (lambda() (untabify (point-min) (point-max))))))
